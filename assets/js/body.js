!function(){function e(t,n,i){function o(r,s){if(!n[r]){if(!t[r]){var u="function"==typeof require&&require;if(!s&&u)return u(r,!0);if(a)return a(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var m=n[r]={exports:{}};t[r][0].call(m.exports,function(e){var n=t[r][1][e];return o(n||e)},m,m.exports,e,t,n,i)}return n[r].exports}for(var a="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}return e}()({1:[function(e,t,n){"use strict";t.exports=function(e,t,n){function i(i){var o;o=window.innerHeight>window.innerWidth?a:r,o<=e?u.setAttribute("content","width="+e):o<=t?u.setAttribute("content","width="+t):u.setAttribute("content","width="+n)}e=e||600,t=t||960,n=n||1280;var o=window.navigator.userAgent.toLowerCase(),a=window.screen.width,r=window.screen.height;if(o.indexOf("android")!=-1)if(o.indexOf("mobile")!=-1){if(e<a){var s=e/a;a=e,r*=s}}else if(t<a){var s=t/a;a=t,r*=s}var u=document.createElement("meta");u.setAttribute("name","viewport"),u.setAttribute("content","width="+e),document.getElementsByTagName("head")[0].appendChild(u),window.addEventListener("orientationchange",i,!1),i()}},{}],2:[function(e,t,n){},{}],3:[function(e,t,n){"use strict";function i(e){this.listenerMap=[{},{}],e&&this.root(e),this.handle=i.prototype.handle.bind(this)}function o(e,t){return e.toLowerCase()===t.tagName.toLowerCase()}function a(e,t){return this.rootElement===window?t===document:this.rootElement===t}function r(e,t){return e===t.id}t.exports=i,i.prototype.root=function(e){var t,n=this.listenerMap;if(this.rootElement){for(t in n[1])n[1].hasOwnProperty(t)&&this.rootElement.removeEventListener(t,this.handle,!0);for(t in n[0])n[0].hasOwnProperty(t)&&this.rootElement.removeEventListener(t,this.handle,!1)}if(!e||!e.addEventListener)return this.rootElement&&delete this.rootElement,this;this.rootElement=e;for(t in n[1])n[1].hasOwnProperty(t)&&this.rootElement.addEventListener(t,this.handle,!0);for(t in n[0])n[0].hasOwnProperty(t)&&this.rootElement.addEventListener(t,this.handle,!1);return this},i.prototype.captureForType=function(e){return["blur","error","focus","load","resize","scroll"].indexOf(e)!==-1},i.prototype.on=function(e,t,n,i){var u,l,m,c;if(!e)throw new TypeError("Invalid event type: "+e);if("function"==typeof t&&(i=n,n=t,t=null),void 0===i&&(i=this.captureForType(e)),"function"!=typeof n)throw new TypeError("Handler must be a type of Function");return u=this.rootElement,l=this.listenerMap[i?1:0],l[e]||(u&&u.addEventListener(e,this.handle,i),l[e]=[]),t?/^[a-z]+$/i.test(t)?(c=t,m=o):/^#[a-z0-9\-_]+$/i.test(t)?(c=t.slice(1),m=r):(c=t,m=s):(c=null,m=a.bind(this)),l[e].push({selector:t,handler:n,matcher:m,matcherParam:c}),this},i.prototype.off=function(e,t,n,i){var o,a,r,s,u;if("function"==typeof t&&(i=n,n=t,t=null),void 0===i)return this.off(e,t,n,!0),this.off(e,t,n,!1),this;if(r=this.listenerMap[i?1:0],!e){for(u in r)r.hasOwnProperty(u)&&this.off(u,t,n);return this}if(s=r[e],!s||!s.length)return this;for(o=s.length-1;o>=0;o--)a=s[o],t&&t!==a.selector||n&&n!==a.handler||s.splice(o,1);return s.length||(delete r[e],this.rootElement&&this.rootElement.removeEventListener(e,this.handle,i)),this},i.prototype.handle=function(e){var t,n,i,o,a,r,s,u=e.type,l=[],m="ftLabsDelegateIgnore";if(e[m]!==!0){switch(s=e.target,3===s.nodeType&&(s=s.parentNode),i=this.rootElement,o=e.eventPhase||(e.target!==e.currentTarget?3:2)){case 1:l=this.listenerMap[1][u];break;case 2:this.listenerMap[0]&&this.listenerMap[0][u]&&(l=l.concat(this.listenerMap[0][u])),this.listenerMap[1]&&this.listenerMap[1][u]&&(l=l.concat(this.listenerMap[1][u]));break;case 3:l=this.listenerMap[0][u]}for(n=l.length;s&&n;){for(t=0;t<n&&(a=l[t],a);t++)if(a.matcher.call(s,a.matcherParam,s)&&(r=this.fire(e,s,a)),r===!1)return e[m]=!0,void e.preventDefault();if(s===i)break;n=l.length,s=s.parentElement}}},i.prototype.fire=function(e,t,n){return n.handler.call(t,e,t)};var s=function(e){if(e){var t=e.prototype;return t.matches||t.matchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector}}(Element);i.prototype.destroy=function(){this.off(),this.root()}},{}],4:[function(e,t,n){"use strict";/**
 * @preserve Create and manage a DOM event delegator.
 *
 * @version 0.3.0
 * @codingstandard ftlabs-jsv2
 * @copyright The Financial Times Limited [All Rights Reserved]
 * @license MIT License (see LICENSE.txt)
 */
var i=e("./delegate");t.exports=function(e){return new i(e)},t.exports.Delegate=i},{"./delegate":3}],5:[function(e,t,n){/* FileSaver.js
 * A saveAs() FileSaver implementation.
 * 1.3.2
 * 2016-06-16 18:25:19
 *
 * By Eli Grey, http://eligrey.com
 * License: MIT
 *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md
 */
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var i=i||function(e){"use strict";if(!("undefined"==typeof e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},i=t.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in i,a=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},r=/constructor/i.test(e.HTMLElement)||e.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),u=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},l="application/octet-stream",m=4e4,c=function(e){var t=function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()};setTimeout(t,m)},p=function(e,t,n){t=[].concat(t);for(var i=t.length;i--;){var o=e["on"+t[i]];if("function"==typeof o)try{o.call(e,n||e)}catch(a){u(a)}}},f=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},h=function(t,u,m){m||(t=f(t));var h,d=this,y=t.type,g=y===l,b=function(){p(d,"writestart progress write writeend".split(" "))},v=function(){if((s||g&&r)&&e.FileReader){var i=new FileReader;return i.onloadend=function(){var t=s?i.result:i.result.replace(/^data:[^;]*;/,"data:attachment/file;"),n=e.open(t,"_blank");n||(e.location.href=t),t=void 0,d.readyState=d.DONE,b()},i.readAsDataURL(t),void(d.readyState=d.INIT)}if(h||(h=n().createObjectURL(t)),g)e.location.href=h;else{var o=e.open(h,"_blank");o||(e.location.href=h)}d.readyState=d.DONE,b(),c(h)};return d.readyState=d.INIT,o?(h=n().createObjectURL(t),void setTimeout(function(){i.href=h,i.download=u,a(i),b(),c(h),d.readyState=d.DONE})):void v()},d=h.prototype,y=function(e,t,n){return new h(e,t||e.name||"download",n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=f(e)),navigator.msSaveOrOpenBlob(e,t)}:(d.abort=function(){},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,y)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof t&&t.exports?t.exports.saveAs=i:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return i})},{}],6:[function(e,t,n){(function(i){!function(e){if("object"==typeof n&&"undefined"!=typeof t)t.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var o;o="undefined"!=typeof window?window:"undefined"!=typeof i?i:"undefined"!=typeof self?self:this,o.jade=e()}}(function(){return function t(n,i,o){function a(s,u){if(!i[s]){if(!n[s]){var l="function"==typeof e&&e;if(!u&&l)return l(s,!0);if(r)return r(s,!0);var m=new Error("Cannot find module '"+s+"'");throw m.code="MODULE_NOT_FOUND",m}var c=i[s]={exports:{}};n[s][0].call(c.exports,function(e){var t=n[s][1][e];return a(t?t:e)},c,c.exports,t,n,i,o)}return i[s].exports}for(var r="function"==typeof e&&e,s=0;s<o.length;s++)a(o[s]);return a}({1:[function(e,t,n){"use strict";function i(e){return null!=e&&""!==e}function o(e){return(Array.isArray(e)?e.map(o):e&&"object"==typeof e?Object.keys(e).filter(function(t){return e[t]}):[e]).filter(i).join(" ")}function a(e){return s[e]||e}function r(e){var t=String(e).replace(u,a);return t===""+e?e:t}n.merge=function l(e,t){if(1===arguments.length){for(var n=e[0],o=1;o<e.length;o++)n=l(n,e[o]);return n}var a=e["class"],r=t["class"];(a||r)&&(a=a||[],r=r||[],Array.isArray(a)||(a=[a]),Array.isArray(r)||(r=[r]),e["class"]=a.concat(r).filter(i));for(var s in t)"class"!=s&&(e[s]=t[s]);return e},n.joinClasses=o,n.cls=function(e,t){for(var i=[],a=0;a<e.length;a++)t&&t[a]?i.push(n.escape(o([e[a]]))):i.push(o(e[a]));var r=o(i);return r.length?' class="'+r+'"':""},n.style=function(e){return e&&"object"==typeof e?Object.keys(e).map(function(t){return t+":"+e[t]}).join(";"):e},n.attr=function(e,t,i,o){return"style"===e&&(t=n.style(t)),"boolean"==typeof t||null==t?t?" "+(o?e:e+'="'+e+'"'):"":0==e.indexOf("data")&&"string"!=typeof t?(JSON.stringify(t).indexOf("&")!==-1,t&&"function"==typeof t.toISOString," "+e+"='"+JSON.stringify(t).replace(/'/g,"&apos;")+"'"):i?(t&&"function"==typeof t.toISOString," "+e+'="'+n.escape(t)+'"'):(t&&"function"==typeof t.toISOString," "+e+'="'+t+'"')},n.attrs=function(e,t){var i=[],a=Object.keys(e);if(a.length)for(var r=0;r<a.length;++r){var s=a[r],u=e[s];"class"==s?(u=o(u))&&i.push(" "+s+'="'+u+'"'):i.push(n.attr(s,u,!1,t))}return i.join("")};var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},u=/[&<>"]/g;n.escape=r,n.rethrow=function m(t,n,i,o){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&n||o))throw t.message+=" on line "+i,t;try{o=o||e("fs").readFileSync(n,"utf8")}catch(a){m(t,null,i)}var r=3,s=o.split("\n"),u=Math.max(i-r,0),l=Math.min(s.length,i+r),r=s.slice(u,l).map(function(e,t){var n=t+u+1;return(n==i?"  > ":"    ")+n+"| "+e}).join("\n");throw t.path=n,t.message=(n||"Jade")+":"+i+"\n"+r+"\n\n"+t.message,t},n.DebugItem=function(e,t){this.lineno=e,this.filename=t}},{fs:2}],2:[function(e,t,n){},{}]},{},[1])(1)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{fs:2}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.grainSize={ja:["なし","粘土","シルト","極細粒砂","細粒砂","中粒砂","粗粒砂","極粗粒砂","礫"],en:["none","clay","silt","very fine sand","fine sand","medium sand","coarse sand","very coarse sand","gravel"],"short":["n","c","s","vfs","fs","ms","cs","vcs","g"]},n.format=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return e=Math.min(Math.max(0,e),8),n=Math.min(Math.max(0,n),8),0===e&&(e=n),0===n&&(n=e),t=Math.min(Math.max(0,t),1e5),t<1?null:{"in":e,out:n,mm:t,note:i}},n.preset=[{"in":8,out:8,mm:10,note:""},{"in":7,out:7,mm:10,note:""},{"in":6,out:6,mm:10,note:""},{"in":5,out:5,mm:10,note:""},{"in":4,out:4,mm:10,note:""},{"in":3,out:3,mm:10,note:""},{"in":2,out:2,mm:10,note:""},{"in":1,out:1,mm:10,note:""},{"in":0,out:0,mm:10,note:""},{"in":1,out:1,mm:10,note:""},{"in":2,out:2,mm:10,note:""},{"in":3,out:3,mm:10,note:""},{"in":4,out:4,mm:10,note:""},{"in":5,out:5,mm:10,note:""},{"in":6,out:6,mm:10,note:""},{"in":7,out:7,mm:10,note:""},{"in":8,out:8,mm:10,note:""},{"in":0,out:0,mm:10,note:""},{"in":8,out:3,mm:10,note:""},{"in":6,out:1,mm:10,note:""},{"in":1,out:6,mm:10,note:""},{"in":3,out:8,mm:10,note:""}]},{}],8:[function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}var a=e("auto-viewport"),r=o(a),s=e("file-saver"),u=o(s),l=e("dom-delegate"),m=o(l),c=e("./modules/utils"),p=o(c),f=e("./modules/player"),h=o(f),d=e("./modules/sound"),y=e("./data"),g=i(y),b=e("template/form"),v=o(b),w=e("template/graph"),D=o(w),k=e("template/about"),j=o(k),I=(0,m["default"])(document.body),S={},R=g.preset,P=(0,h["default"])(R,S),_=document.getElementById("hide"),U=document.getElementById("form"),x=document.getElementById("about"),E=document.getElementById("header"),O=document.getElementById("graph"),A=document.getElementById("play"),L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};U.innerHTML=(0,v["default"])({grainSize:g.grainSize,grainSizeLang:"en",edit:e}),U.classList.add("show")},M=function(){U.classList.remove("show"),P.playing()||P.index(0)},T=function(){x.innerHTML=(0,j["default"])(),x.classList.add("show")},B=function(){x.classList.remove("show"),x.innerHTML=(0,j["default"])()},N=function(){O.innerHTML=(0,D["default"])({items:R.concat().reverse(),ratio:{w:E.querySelector(".widthRatio").value,h:E.querySelector(".heightRatio").value}})},q=function(){return g.format(1*U.querySelector(".in select").value,1e3*U.querySelector(".thickness .m").value+10*U.querySelector(".thickness .cm").value+1*U.querySelector(".thickness .mm").value,1*U.querySelector(".out select").value,U.querySelector(".note textarea").value)},C=function(){P.stop(),P=(0,h["default"])(R,S)};I.on("click","#form .add",function(){var e=q();null!=e&&("top"==U.querySelector(".add-to").value?R.push(e):R.unshift(e),C(),M(),N())}),I.on("change",".thickness .m, .thickness .cm, .thickness .mm",function(e){e.target.value=1*e.target.value|0}),I.on("click","#form .edit",function(){var e=q();null!=e&&(R[1*U.querySelector(".index").value]=e,C(),M(),N())}),I.on("click","#form .insertBefore",function(){var e=q();null!=e&&(R.splice(1*U.querySelector(".index").value,0,e),C(),M(),N())}),I.on("click","#form .insertAfter",function(){var e=q();null!=e&&(R.splice(1*U.querySelector(".index").value+1,0,e),C(),M(),N())}),I.on("click","#form .remove",function(){R.splice(1*U.querySelector(".index").value,1),C(),M(),N()}),I.on("click","#form .bg, #form .cancel, #header .navbar-toggle",function(){M(),N()}),I.on("change",'#header input[type="range"]',function(){N()}),I.on("change","#header .border",function(){this.checked?O.classList.add("border"):O.classList.remove("border")});var z=function(){[].forEach.call(O.querySelectorAll(".layer"),function(e){return e.classList.remove("edit")})};I.on("click","#graph .append",function(){z(),L({addTo:"top"})}),I.on("click","#graph .prepend",function(){z(),L({addTo:"bottom"})}),I.on("click","#graph .figure",function(){z(),this.parentNode.classList.add("edit"),P.index(this.getAttribute("data-index")),L({index:this.getAttribute("data-index"),layer:JSON.parse(this.getAttribute("data-layer"))})}),I.on("click","#save-open",function(){M()}),I.on("click","#save",function(){var e=E.querySelector("#save-name").value.replace(" ","_");e||(e="sedimentary-rock"),e+="_"+Date.now(),u["default"].saveAs(p["default"].json.toPng(R),e+".png")}),I.on("click","#load",function(e){if(M(),File&&FileReader&&FileList&&Blob){var t=document.createElement("input");_.innerHTML="",_.append(t),t.type="file",t.accept="image/png",t.onchange=function(e){var n=t.files[0],i=document.createElement("img");i.onload=function(){R=p["default"].json.fromPng(i),C(),N()},i.src=URL.createObjectURL(n),_.removeChild(t)},t.click()}}),I.on("click","#dataClear",function(){R=[],C(),M(),N()}),I.on("click",".btn-about",function(){T(),$(".navbar-collapse").collapse("hide")}),I.on("click","#about .bg, #about .close, #header .navbar-toggle",function(){B()}),A.onchange=function(){this.checked?P.stop():(P.playing()&&P.stop(),P.play())};var F=function(){[].forEach.call(O.querySelectorAll(".layer"),function(e){return e.classList.remove("play")})};S.onPlay=F,S.onStop=function(){F(),A.checked||$(A).bootstrapToggle("on");var e=document.querySelector("#graph .edit");e&&P.index(e.querySelector("[data-index]").getAttribute("data-index"))},S.onUpdate=function(e){F(),O.querySelector('[data-index="'+e+'"]').parentNode.classList.add("play")};var H="pc",G=function(){var e=E.querySelector(".widthRatio");e.max=.8*document.documentElement.clientWidth*.6/8|0,N();var t="pc";$(window).width()<768&&(t="sp"),H!=t&&(H=t,$("#play").bootstrapToggle("destroy"),$("#play").bootstrapToggle())};window.addEventListener("resize",G),function(){(0,r["default"])(400),G();var e=E.querySelector(".widthRatio");e.value=e.max,N();try{var t=document.querySelector(".navbar-toggle");t.style="display: none",setTimeout(function(){t.style=""},0)}catch(n){}!(0,d.isAvailable)()}()},{"./data":7,"./modules/player":9,"./modules/sound":10,"./modules/utils":11,"auto-viewport":1,"dom-delegate":4,"file-saver":5,"template/about":13,"template/form":14,"template/graph":15}],9:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function i(o,a){try{var r=t[o](a),s=r.value}catch(u){return void n(u)}return r.done?void e(s):Promise.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)})}return i("next")})}}Object.defineProperty(n,"__esModule",{value:!0});var a=e("./sound.js"),r=i(a),s=[3,2,2,3,2,3,2,2,3].reduce(function(e,t){return e.push(e[e.length-1]+t),e},[0]),u=!0,l=!1,m=["A3","C4","D4","E4","G4","A4","C5","D5","E5"].map(function(e){return"./assets/sound/guiter/"+e+".mp3"});n["default"]=function(e,t){var n=120,i=0,a=0,c=!1,p=0,f=!1,h=6e4/n*1/8;h=0;var d=function(e){return 0==h?e:.5*h>e%h?(e/h|0)*h:((e/h|0)+1)*h},y=100,g=function(e){return Math.log(e)*y},b=function(){var e=o(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=5;break}return l=!0,r["default"].emptySound(),e.next=5,r["default"].loadBuffers(m)["catch"](function(e){u=!1});case 5:if(!c){e.next=7;break}return e.abrupt("return");case 7:t.onPlay&&t.onPlay(),c=!0,v();case 10:case"end":return e.stop()}},n,void 0)}));return function(){return e.apply(this,arguments)}}(),v=function k(){var n=e[p];t.onUpdate&&t.onUpdate(p),p++,e.length<=p&&(p=0,f||(c=!1));var i=d(g(n.mm));u?r["default"].noteByBuffer({buffer:m[8-n["in"]],"in":s[8-n["in"]],out:s[8-n.out],duration:i,decay:.1,volume:n["in"]&&n.out?1:0}):r["default"].note({"in":440*Math.pow(1.05946309436,s[8-n["in"]]),out:440*Math.pow(1.05946309436,s[8-n.out]),duration:i,decay:.1,volume:n["in"]&&n.out?1:0,type:["sine","square","sawtooth","triangle","custom"][3]}),a=c?setTimeout(k,i):setTimeout(w,i)},w=function(){p=0,c=!1,clearTimeout(a),r["default"].stopAll(),t.onStop&&t.onStop()},D=function j(){clearTimeout(i);var e=6e4/n*1,t=0;r["default"].note(440*Math.pow(1.05946309436,t),{duration:0,decay:.1,volume:.5,type:"square"}),c&&(i=setTimeout(j,e))};return{playing:function(){return c},play:b,stop:w,beat:D,index:function(t){0<=t&&t<e.length&&(p=t)}}}},{"./sound.js":10}],10:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function i(o,a){try{var r=t[o](a),s=r.value}catch(u){return void n(u)}return r.done?void e(s):Promise.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)})}return i("next")})}}Object.defineProperty(n,"__esModule",{value:!0}),n.create=n.isBufferAvailable=n.isAvailable=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=e("./utils.js"),s=i(r),u=window.AudioContext||window.webkitAudioContext||null,l=n.isAvailable=function(){return!!u};n.isBufferAvailable=function(){return!(!u||!(new u).createBufferSource().detune)};if(u){var m=u.prototype.decodeAudioData;u.prototype.decodeAudioData=function(e,t,n){var i=this,o=new Promise(function(t,n){m.call(i,e,t,n)}).then(t,n)["catch"](function(e){throw e});return o}}var c=1e3/60,p=n.create=function(){if(!l())return null;var e=new u,t=e.createGain();t.connect(e.destination);var n={},i=0,r={};return{master:t.gain,note:function(o,r){"object"!=("undefined"==typeof o?"undefined":a(o))||r||(r=o,o=440);var u={"in":o,out:o,duration:0,decay:.1,volume:1,type:"sine"};r=s["default"].object.assign({},u,r);var l="note_"+i++,m=!0;n[l]=function(){return m=!1};var p=r.duration/c|0,f=0,h=r.out-r["in"];0!=p&&(h/=p);var d=e.createOscillator(),y=e.createGain(),g=function D(){d.frequency.value+=h,m&&p!=f?f++:(y.gain.value+=-y.gain.value*r.decay,h=0),y.gain.value<1e-4?(d.stop(0),y.disconnect(0),d.disconnect(0),delete n[l]):requestAnimationFrame(D)};if(d.connect(y),y.connect(t),y.gain.value=r.volume,"custom"==r.type){var b=new Float32Array(64),v=new Float32Array(64);b[0]=v[0]=0;for(var w=1;w<64;++w)b[w]=Math.random(),v[w]=Math.random();d.setPeriodicWave(e.createPeriodicWave(b,v))}else d.type=r.type;d.frequency.value=r["in"],d.start(0),g()},emptySound:function(){e.createBufferSource().start(0)},loadBuffers:function(){function t(){return n.apply(this,arguments)}var n=o(regeneratorRuntime.mark(function i(){var t,n,o,a,s,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:t=0,n=u.length;case 1:if(!(t<n)){i.next=17;break}if(o=u[t],!r[o]){i.next=5;break}return i.abrupt("continue",14);case 5:return i.next=7,fetch(o,{});case 7:return a=i.sent,i.next=10,a.arrayBuffer();case 10:return s=i.sent,i.next=13,e.decodeAudioData(s);case 13:r[o]=i.sent;case 14:t++,i.next=1;break;case 17:case"end":return i.stop()}},i,void 0)}));return t}(),noteByBuffer:function(o){var a={buffer:"","in":0,out:0,duration:0,decay:.1,volume:1};o=s["default"].object.assign({},a,o);var u="note_"+i++,l=!0;n[u]=function(){return l=!1};var m=o.duration/c|0,p=0,f=100*(o.out-o["in"]);0!=m&&(f/=m);var h=e.createBufferSource(),d=e.createGain(),y=function g(){h.detune&&(h.detune.value+=f),l&&m!=p?p++:(d.gain.value+=-d.gain.value*o.decay,f=0),d.gain.value<1e-4?(h.stop(0),d.disconnect(0),h.disconnect(0),delete n[u]):requestAnimationFrame(g)};h.buffer=r[o.buffer],h.connect(d),d.connect(t),d.gain.value=o.volume,h.start(0),y()},stopAll:function(){for(var e in n)n[e]()}}};n["default"]=p()},{"./utils.js":11}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=arguments,o=n.object={assign:Object.assign||function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<i.length;n++){var o=i[n];if(void 0!==o&&null!==o)for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a])}return t}},a=n.string={toBase64:function(e){return btoa(unescape(encodeURIComponent(e)))},fromBase64:function(e){return decodeURIComponent(escape(atob(e)))},toPng:function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),i=Math.ceil(e.length/3),o=Math.ceil(Math.sqrt(i)),a=Math.ceil(i/o);t.width=o,t.height=a,n.fillStyle="rgb(0, 0, 0)",n.fillRect(0,0,o,a);for(var r=n.getImageData(0,0,o,a),s=0,u=0,l=e.length;u<l;u++)r.data[s]=e.charCodeAt(u),s++,s%4==3&&s++;n.putImageData(r,0,0);for(var m=t.toDataURL().split(","),c=m[0].match(/:(.*?);/)[1],p=atob(m[1]),f=p.length,h=new Uint8Array(f);f--;)h[f]=p.charCodeAt(f);return new Blob([h],{type:c})},fromPng:function(e){var t=document.createElement("canvas"),n=t.getContext("2d");t.width=e.width,t.height=e.height,n.drawImage(e,0,0);var i=n.getImageData(0,0,e.width,e.height).data;i=i.filter(function(e,t){return t%4!=3});var o=i.indexOf(0);return o!=-1&&(i=i.slice(0,o)),String.fromCharCode.apply(null,i)}},r=n.json={toPng:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return"[object String]"!=Object.prototype.toString.call(e)&&(e=JSON.stringify(e)),t&&(e=a.toBase64(e)),a.toPng(e)},fromPng:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e=a.fromPng(e),n&&(e=a.fromBase64(e)),t&&(e=JSON.parse(e)),e}},s=n.file={download:function(e,t){if(navigator.msSaveBlob)navigator.msSaveBlob(e,t);else{var n=document.createElement("a");n.href=URL.createObjectURL(e),n.target="_blank",n.download=t,n.click(),URL.revokeObjectURL(n)}},downloadText:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text.txt";return s.download(new Blob([e],{type:"text/plain"}),t)}};n["default"]={object:o,string:a,json:r,file:s}},{}],12:[function(e,t,n){"use strict";e("app")},{app:8}],13:[function(e,t,n){var i=e("jade/runtime");t.exports=function(e){var t=[new i.DebugItem(1,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/about.jade")];try{var n=[];return t.unshift(new i.DebugItem(0,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/about.jade")),t.unshift(new i.DebugItem(1,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/about.jade")),n.push('\n<div class="bg">'),t.unshift(new i.DebugItem((void 0),t[0].filename)),t.shift(),n.push("</div>"),t.shift(),t.unshift(new i.DebugItem(2,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/about.jade")),n.push('\n<div class="panel">'),t.unshift(new i.DebugItem((void 0),t[0].filename)),t.unshift(new i.DebugItem(3,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/about.jade")),n.push("\n  <p>"),t.unshift(new i.DebugItem((void 0),t[0].filename)),t.unshift(new i.DebugItem(3,t[0].filename)),n.push("The web application to convert strata to music, created by Geomorphology and Geology Lab, Rissho Univ. and SHIFTBRAIN Inc. "),t.shift(),t.shift(),n.push("</p>"),t.shift(),t.unshift(new i.DebugItem(4,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/about.jade")),n.push("\n  <p>"),t.unshift(new i.DebugItem((void 0),t[0].filename)),t.unshift(new i.DebugItem(4,t[0].filename)),n.push("Sedimentary Rock!（セディメンタリーロック！）は地層を音楽に変換するWebアプリです。立正大学地形地質環境研究室とSHIFTBRAIN Inc.が共同で開発しています。 "),t.shift(),t.shift(),n.push("</p>"),t.shift(),t.unshift(new i.DebugItem(5,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/about.jade")),n.push('\n  <button class="close btn btn-default">'),t.unshift(new i.DebugItem((void 0),t[0].filename)),t.unshift(new i.DebugItem(6,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/about.jade")),n.push('<span class="glyphicon glyphicon-remove">'),t.unshift(new i.DebugItem((void 0),t[0].filename)),t.shift(),n.push("</span>"),t.shift(),t.shift(),n.push("</button>"),t.shift(),t.shift(),n.push("\n</div>"),t.shift(),t.shift(),n.join("")}catch(o){i.rethrow(o,t[0].filename,t[0].lineno,".bg\n.panel\n    p The web application to convert strata to music, created by Geomorphology and Geology Lab, Rissho Univ. and SHIFTBRAIN Inc. \n    p Sedimentary Rock!（セディメンタリーロック！）は地層を音楽に変換するWebアプリです。立正大学地形地質環境研究室とSHIFTBRAIN Inc.が共同で開発しています。 \n    button.close.btn.btn-default\n      span.glyphicon.glyphicon-remove\n")}}},{"jade/runtime":6}],14:[function(e,t,n){var i=e("jade/runtime");t.exports=function(e){var t=[new i.DebugItem(1,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")];try{var n,o=[],a=e||{};return function(e,a,r,s){t.unshift(new i.DebugItem(0,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),t.unshift(new i.DebugItem(1,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n<div class="bg">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.shift(),o.push("</div>"),t.shift(),t.unshift(new i.DebugItem(2,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n<div class="panel">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(3,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n  <div class="form-horizontal">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(s,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade"));var u={"in":"-",out:"-",m:0,cm:0,mm:0,note:""};e.layer&&(u["in"]=e.layer["in"],u.out=e.layer.out,u.mm=e.layer.mm,u.note=e.layer.note,u.m=u.mm/1e3|0,u.mm=u.mm%1e3,u.cm=u.mm/10|0,u.mm=u.mm%10);var l=a[r].length-1;t.shift(),t.unshift(new i.DebugItem(27,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n    <div class="thickness form-group">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(28,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n      <label class="col-sm-2 control-label">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(28,t[0].filename)),o.push("thickness"),t.shift(),t.shift(),o.push("</label>"),t.shift(),t.unshift(new i.DebugItem(29,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n      <div class="col-sm-10 form-inline">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(30,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n        <div class="input-group">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(31,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n          <input type="number" min="0" max="100"'+i.attr("value",u.m,!0,!1)+' class="m form-control"/>'),t.shift(),t.unshift(new i.DebugItem(32,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n          <div class="input-group-addon">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(32,t[0].filename)),o.push("m"),t.shift(),t.shift(),o.push("</div>"),t.shift(),t.shift(),o.push("\n        </div>"),t.shift(),t.unshift(new i.DebugItem(33,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n        <div class="input-group">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(34,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n          <input type="number" min="0" max="10000"'+i.attr("value",u.cm,!0,!1)+' class="cm form-control"/>'),t.shift(),t.unshift(new i.DebugItem(35,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n          <div class="input-group-addon">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(35,t[0].filename)),o.push("cm"),t.shift(),t.shift(),o.push("</div>"),t.shift(),t.shift(),o.push("\n        </div>"),t.shift(),t.unshift(new i.DebugItem(36,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n        <div class="input-group">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(37,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n          <input type="number" min="0" max="100000"'+i.attr("value",u.mm,!0,!1)+' class="mm form-control"/>'),t.shift(),t.unshift(new i.DebugItem(38,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n          <div class="input-group-addon">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(38,t[0].filename)),o.push("mm"),t.shift(),t.shift(),o.push("</div>"),t.shift(),t.shift(),o.push("\n        </div>"),t.shift(),t.shift(),o.push("\n      </div>"),t.shift(),t.shift(),o.push("\n    </div>"),t.shift(),t.unshift(new i.DebugItem(40,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n    <div class="form-group">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(41,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n      <label class="col-sm-2 control-label">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(41,t[0].filename)),o.push("grain size"),t.shift(),t.shift(),o.push("</label>"),t.shift(),t.unshift(new i.DebugItem(42,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n      <div class="col-sm-10">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(43,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n        <div class="out form-inline">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(45,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),t.shift(),t.unshift(new i.DebugItem(45,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n          <select class="form-control">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(46,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n            <option value="0">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(46,t[0].filename)),o.push("- for top -"),t.shift(),t.shift(),o.push("</option>"),t.shift(),t.unshift(new i.DebugItem(47,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),function(){var e=a[r];if("number"==typeof e.length)for(var m=0,c=e.length;m<c;m++){e[m];t.unshift(new i.DebugItem(47,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),t.unshift(new i.DebugItem(48,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade"));var p=l-m;t.shift(),t.unshift(new i.DebugItem(49,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push("\n            <option"+i.attr("value",p,!0,!1)+i.attr("selected",p==u.out,!0,!1)+">"+i.escape(null==(n=a[r][p])?"":n)),t.unshift(new i.DebugItem(s,t[0].filename)),t.shift(),o.push("</option>"),t.shift(),t.shift()}else{var c=0;for(var m in e){c++;e[m];t.unshift(new i.DebugItem(47,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),t.unshift(new i.DebugItem(48,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade"));var p=l-m;t.shift(),t.unshift(new i.DebugItem(49,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push("\n            <option"+i.attr("value",p,!0,!1)+i.attr("selected",p==u.out,!0,!1)+">"+i.escape(null==(n=a[r][p])?"":n)),t.unshift(new i.DebugItem(s,t[0].filename)),t.shift(),o.push("</option>"),t.shift(),t.shift()}}}.call(this),t.shift(),t.shift(),o.push("\n          </select>"),t.shift(),t.shift(),o.push("\n        </div>"),t.shift(),t.unshift(new i.DebugItem(51,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n        <div class="in form-inline">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(53,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),t.shift(),t.unshift(new i.DebugItem(53,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n          <select class="form-control">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(54,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n            <option value="0">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(54,t[0].filename)),o.push("- for bottom -"),t.shift(),t.shift(),o.push("</option>"),t.shift(),t.unshift(new i.DebugItem(55,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),function(){var e=a[r];if("number"==typeof e.length)for(var m=0,c=e.length;m<c;m++){e[m];t.unshift(new i.DebugItem(55,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),t.unshift(new i.DebugItem(56,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade"));var p=l-m;t.shift(),t.unshift(new i.DebugItem(57,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push("\n            <option"+i.attr("value",p,!0,!1)+i.attr("selected",p==u["in"],!0,!1)+">"+i.escape(null==(n=a[r][p])?"":n)),t.unshift(new i.DebugItem(s,t[0].filename)),
t.shift(),o.push("</option>"),t.shift(),t.shift()}else{var c=0;for(var m in e){c++;e[m];t.unshift(new i.DebugItem(55,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),t.unshift(new i.DebugItem(56,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade"));var p=l-m;t.shift(),t.unshift(new i.DebugItem(57,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push("\n            <option"+i.attr("value",p,!0,!1)+i.attr("selected",p==u["in"],!0,!1)+">"+i.escape(null==(n=a[r][p])?"":n)),t.unshift(new i.DebugItem(s,t[0].filename)),t.shift(),o.push("</option>"),t.shift(),t.shift()}}}.call(this),t.shift(),t.shift(),o.push("\n          </select>"),t.shift(),t.shift(),o.push("\n        </div>"),t.shift(),t.shift(),o.push("\n      </div>"),t.shift(),t.shift(),o.push("\n    </div>"),t.shift(),t.unshift(new i.DebugItem(59,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n    <div class="note form-group">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(60,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n      <label class="col-sm-2 control-label">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(60,t[0].filename)),o.push("note"),t.shift(),t.shift(),o.push("</label>"),t.shift(),t.unshift(new i.DebugItem(61,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n      <div class="col-sm-10">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(62,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n        <textarea class="form-control">'+i.escape(null==(n=u.note)?"":n)),t.unshift(new i.DebugItem(s,t[0].filename)),t.shift(),o.push("</textarea>"),t.shift(),t.shift(),o.push("\n      </div>"),t.shift(),t.shift(),o.push("\n    </div>"),t.shift(),t.unshift(new i.DebugItem(64,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n    <div class="form-group">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(65,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n      <div class="col-sm-10 col-md-offset-2">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(66,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),null!=e.index?(t.unshift(new i.DebugItem(67,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),t.unshift(new i.DebugItem(67,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n        <input type="hidden"'+i.attr("value",e.index,!0,!1)+' class="index"/>'),t.shift(),t.unshift(new i.DebugItem(68,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n        <button class="edit btn btn-warning">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(69,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('<span class="glyphicon glyphicon-pencil">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.shift(),o.push("</span>"),t.shift(),t.unshift(new i.DebugItem(70,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push(" EDIT"),t.shift(),t.shift(),o.push("</button>"),t.shift(),t.unshift(new i.DebugItem(71,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n        <div class="btn-group">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(72,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n          <button data-toggle="dropdown" class="btn btn-primary dropdown-toggle">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(73,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('<span class="glyphicon glyphicon-object-align-left">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.shift(),o.push("</span>"),t.shift(),t.unshift(new i.DebugItem(74,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push(" INSERT&nbsp;"),t.shift(),t.unshift(new i.DebugItem(75,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('<span class="caret">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.shift(),o.push("</span>"),t.shift(),t.shift(),o.push("</button>"),t.shift(),t.unshift(new i.DebugItem(76,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n          <ul class="dropdown-menu">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(77,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push("\n            <li>"),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(77,t[0].filename)),o.push('<a class="insertAfter">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(77,t[0].filename)),o.push("TOP SIDE"),t.shift(),t.shift(),o.push("</a>"),t.shift(),t.shift(),o.push("</li>"),t.shift(),t.unshift(new i.DebugItem(78,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push("\n            <li>"),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(78,t[0].filename)),o.push('<a class="insertBefore">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(78,t[0].filename)),o.push("BOTTOM SIDE"),t.shift(),t.shift(),o.push("</a>"),t.shift(),t.shift(),o.push("</li>"),t.shift(),t.shift(),o.push("\n          </ul>"),t.shift(),t.shift(),o.push("\n        </div>"),t.shift(),t.unshift(new i.DebugItem(80,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),t.shift(),t.unshift(new i.DebugItem(81,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),t.shift(),t.unshift(new i.DebugItem(81,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n        <button class="remove btn btn-danger">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(82,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('<span class="glyphicon glyphicon-trash">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.shift(),o.push("</span>"),t.shift(),t.unshift(new i.DebugItem(83,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push(" REMOVE"),t.shift(),t.shift(),o.push("</button>"),t.shift(),t.unshift(new i.DebugItem(84,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n        <button class="cancel btn btn-default">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(85,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('<span class="glyphicon glyphicon-remove">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.shift(),o.push("</span>"),t.shift(),t.unshift(new i.DebugItem(86,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push(" CANCEL"),t.shift(),t.shift(),o.push("</button>"),t.shift(),t.shift()):(t.unshift(new i.DebugItem(88,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),t.unshift(new i.DebugItem(88,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n        <input type="hidden"'+i.attr("value",e.addTo,!0,!1)+' class="add-to"/>'),t.shift(),t.unshift(new i.DebugItem(89,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n        <button class="add btn btn-primary">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(90,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('<span class="glyphicon glyphicon-plus">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.shift(),o.push("</span>"),t.shift(),t.unshift(new i.DebugItem(91,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push(" ADD"),t.shift(),t.shift(),o.push("</button>"),t.shift(),t.unshift(new i.DebugItem(92,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('\n        <button class="cancel btn btn-default">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(93,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push('<span class="glyphicon glyphicon-remove">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.shift(),o.push("</span>"),t.shift(),t.unshift(new i.DebugItem(94,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push(" CANCEL"),t.shift(),t.shift(),o.push("</button>"),t.shift(),t.unshift(new i.DebugItem(96,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),t.shift(),t.unshift(new i.DebugItem(97,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),t.shift(),t.unshift(new i.DebugItem(97,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),o.push(""),t.shift(),t.shift()),t.shift(),t.unshift(new i.DebugItem(99,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/form.jade")),t.shift(),t.shift(),o.push("\n      </div>"),t.shift(),t.shift(),o.push("\n    </div>"),t.shift(),t.shift(),o.push("\n  </div>"),t.shift(),t.shift(),o.push("\n</div>"),t.shift(),t.shift()}.call(this,"edit"in a?a.edit:"undefined"!=typeof edit?edit:void 0,"grainSize"in a?a.grainSize:"undefined"!=typeof grainSize?grainSize:void 0,"grainSizeLang"in a?a.grainSizeLang:"undefined"!=typeof grainSizeLang?grainSizeLang:void 0,"undefined"in a?a.undefined:void 0),o.join("")}catch(r){i.rethrow(r,t[0].filename,t[0].lineno,'.bg\n.panel\n  .form-horizontal\n    -\n      var layer = {\n        in: \'-\',\n        out: \'-\',\n        m: 0,\n        cm: 0,\n        mm: 0,\n        note: \'\',\n      }\n      if(edit.layer) {\n        layer.in = edit.layer.in\n        layer.out = edit.layer.out\n        layer.mm = edit.layer.mm\n        layer.note = edit.layer.note\n\n        layer.m = layer.mm / 1000 | 0\n        layer.mm = layer.mm % 1000\n        layer.cm = layer.mm / 10 | 0\n        layer.mm = layer.mm % 10\n      }\n\n      var grainLength = grainSize[grainSizeLang].length - 1\n\n    .thickness.form-group\n      label.col-sm-2.control-label thickness\n      .col-sm-10.form-inline\n        .input-group\n          input.m.form-control(type="number" min="0" max="100" value=layer.m)\n          .input-group-addon m\n        .input-group\n          input.cm.form-control(type="number" min="0" max="10000" value=layer.cm)\n          .input-group-addon cm\n        .input-group\n          input.mm.form-control(type="number" min="0" max="100000" value=layer.mm)\n          .input-group-addon mm\n\n    .form-group\n      label.col-sm-2.control-label grain size\n      .col-sm-10\n        div.out.form-inline\n          //- label top\n          select.form-control\n            option(value="0") - for top -\n            for item, i in grainSize[grainSizeLang]\n              - var index = grainLength - i\n              option(value=index selected=index==layer.out)= grainSize[grainSizeLang][index]\n\n        div.in.form-inline\n          //- label bottom\n          select.form-control\n            option(value="0") - for bottom -\n            for item, i in grainSize[grainSizeLang]\n              - var index = grainLength - i\n              option(value=index selected=index==layer.in)= grainSize[grainSizeLang][index]\n\n    .note.form-group\n      label.col-sm-2.control-label note\n      .col-sm-10\n        textarea.form-control= layer.note\n\n    .form-group\n      .col-sm-10.col-md-offset-2\n        if edit.index != null\n          input.index(type="hidden" value=edit.index)\n          button.edit.btn.btn-warning\n            span.glyphicon.glyphicon-pencil\n            |  EDIT\n          .btn-group\n            button.btn.btn-primary.dropdown-toggle(data-toggle="dropdown")\n              span.glyphicon.glyphicon-object-align-left\n              |  INSERT&nbsp;\n              span.caret\n            ul.dropdown-menu\n              li: a.insertAfter TOP SIDE\n              li: a.insertBefore BOTTOM SIDE\n          //- button.insertAfter.btn.btn-default INSERT INTO TOP SIDE\n          //- button.insertBefore.btn.btn-default INSERT INTO BOTTOM SIDE\n          button.remove.btn.btn-danger\n            span.glyphicon.glyphicon-trash\n            |  REMOVE\n          button.cancel.btn.btn-default\n            span.glyphicon.glyphicon-remove\n            |  CANCEL\n        else\n          input.add-to(type="hidden" value=edit.addTo)\n          button.add.btn.btn-primary\n              span.glyphicon.glyphicon-plus\n              |  ADD\n          button.cancel.btn.btn-default\n            span.glyphicon.glyphicon-remove\n            |  CANCEL\n          //- button.append ADD TO TOP\n          //- button.prepend ADD TO BOTTOM\n\n        //- button.clear FORM CLEAR\n')}}},{"jade/runtime":6}],15:[function(e,t,n){var i=e("jade/runtime");t.exports=function(e){var t=[new i.DebugItem(1,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/graph.jade")];try{var n,o=[],a=e||{};return function(e,a,r,s){t.unshift(new i.DebugItem(0,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/graph.jade")),t.unshift(new i.DebugItem(1,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/graph.jade"));var u=e.PI/180;t.shift(),t.unshift(new i.DebugItem(3,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/graph.jade")),o.push('\n<button class="append btn btn-primary">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(4,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/graph.jade")),o.push('<span class="glyphicon glyphicon-plus">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.shift(),o.push("</span>"),t.shift(),t.unshift(new i.DebugItem(5,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/graph.jade")),o.push(" ADD"),t.shift(),t.shift(),o.push("</button>"),t.shift(),t.unshift(new i.DebugItem(7,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/graph.jade")),function(){var l=a;if("number"==typeof l.length)for(var m=0,c=l.length;m<c;m++){var p=l[m];t.unshift(new i.DebugItem(7,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/graph.jade")),t.unshift(new i.DebugItem(s,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/graph.jade"));var f=a.length-m-1,h=p["in"]>p.out?p["in"]:p.out;0==h&&(h=1);var d=e.atan2(p["in"]*r.w-p.out*r.w,p.mm*r.h)/u;t.shift(),t.unshift(new i.DebugItem(13,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/graph.jade")),o.push('\n<div class="layer">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(14,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/graph.jade")),o.push("\n  <div"+i.attr("data-index",f,!0,!1)+i.attr("data-layer",p,!0,!1)+i.attr("style","width: "+h*r.w+"px; height: "+p.mm*r.h+"px; transform: skew("+d+"deg);",!0,!1)+i.cls(["figure",["in-"+p["in"],"out-"+p.out]],[null,!0])+">"),t.unshift(new i.DebugItem(s,t[0].filename)),t.shift(),o.push("</div>"),t.shift(),t.unshift(new i.DebugItem(20,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/graph.jade")),o.push("\n  <div"+i.attr("style","left: "+(h*r.w+20)+"px;",!0,!1)+' class="note">'+(null==(n=p.note.replace(/\n/g,"<br>"))?"":n)),t.unshift(new i.DebugItem(s,t[0].filename)),t.shift(),o.push("</div>"),t.shift(),t.shift(),o.push("\n</div>"),t.shift(),t.shift()}else{var c=0;for(var m in l){c++;var p=l[m];t.unshift(new i.DebugItem(7,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/graph.jade")),t.unshift(new i.DebugItem(s,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/graph.jade"));var f=a.length-m-1,h=p["in"]>p.out?p["in"]:p.out;0==h&&(h=1);var d=e.atan2(p["in"]*r.w-p.out*r.w,p.mm*r.h)/u;t.shift(),t.unshift(new i.DebugItem(13,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/graph.jade")),o.push('\n<div class="layer">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(14,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/graph.jade")),o.push("\n  <div"+i.attr("data-index",f,!0,!1)+i.attr("data-layer",p,!0,!1)+i.attr("style","width: "+h*r.w+"px; height: "+p.mm*r.h+"px; transform: skew("+d+"deg);",!0,!1)+i.cls(["figure",["in-"+p["in"],"out-"+p.out]],[null,!0])+">"),t.unshift(new i.DebugItem(s,t[0].filename)),t.shift(),o.push("</div>"),t.shift(),t.unshift(new i.DebugItem(20,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/graph.jade")),o.push("\n  <div"+i.attr("style","left: "+(h*r.w+20)+"px;",!0,!1)+' class="note">'+(null==(n=p.note.replace(/\n/g,"<br>"))?"":n)),t.unshift(new i.DebugItem(s,t[0].filename)),t.shift(),o.push("</div>"),t.shift(),t.shift(),o.push("\n</div>"),t.shift(),t.shift()}}}.call(this),t.shift(),t.unshift(new i.DebugItem(22,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/graph.jade")),a.length&&(t.unshift(new i.DebugItem(23,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/graph.jade")),t.unshift(new i.DebugItem(23,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/graph.jade")),o.push('\n<button class="prepend btn btn-primary">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.unshift(new i.DebugItem(24,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/graph.jade")),o.push('<span class="glyphicon glyphicon-plus">'),t.unshift(new i.DebugItem(s,t[0].filename)),t.shift(),o.push("</span>"),t.shift(),t.unshift(new i.DebugItem(25,"/Users/kaminaly/Documents/Project/prototype/SedimentaryRock/src/templates/_client/template/graph.jade")),o.push(" ADD"),t.shift(),t.shift(),o.push("</button>"),t.shift(),t.shift()),t.shift(),t.shift()}.call(this,"Math"in a?a.Math:"undefined"!=typeof Math?Math:void 0,"items"in a?a.items:"undefined"!=typeof items?items:void 0,"ratio"in a?a.ratio:"undefined"!=typeof ratio?ratio:void 0,"undefined"in a?a.undefined:void 0),o.join("")}catch(r){i.rethrow(r,t[0].filename,t[0].lineno,"- var degRad = Math.PI / 180\n\nbutton.append.btn.btn-primary\n    span.glyphicon.glyphicon-plus\n    |  ADD\n\nfor item, index in items\n    -\n        var i = items.length - index - 1\n        var width = item.in > item.out ? item.in : item.out\n        if(width == 0) width = 1\n        var deg = Math.atan2(item.in * ratio.w - item.out * ratio.w, item.mm * ratio.h) / degRad\n    .layer\n        .figure(\n            class=['in-#{item.in}', 'out-#{item.out}']\n            data-index=i\n            data-layer=item,\n            style=\"width: #{width * ratio.w}px; height: #{item.mm * ratio.h}px; transform: skew(#{deg}deg);\"\n        )\n        .note(style=\"left: #{width * ratio.w + 20}px;\")!= item.note.replace(/\\n/g, '<br>')\n\nif items.length\n    button.prepend.btn.btn-primary\n        span.glyphicon.glyphicon-plus\n        |  ADD\n")}}},{"jade/runtime":6}]},{},[12]);